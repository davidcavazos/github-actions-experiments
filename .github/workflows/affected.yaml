name: üîç

on:
  push:
    branches: main
  pull_request:

jobs:
  affected:
    name: Finding affected tests
    runs-on: ubuntu-latest
    permissions: write-all
    # checks: write
    # contents: read
    # pull-requests: write
    steps:
      - run: gh auth status
      - name: Create check
        # For more information:
        #   https://www.kenmuse.com/blog/creating-github-checks
        #   https://docs.github.com/en/rest/checks/runs?apiVersion=2022-11-28#create-a-check-run
        env:
          GH_TOKEN: ${{ github.token }}
        run: |
          gh api --method POST \
              /repos/${{ github.repository }}/check-runs \
              -H "Accept: application/vnd.github+json" \
              -H "X-GitHub-Api-Version: 2022-11-28" \
              -f "name=Super Check" \
              -f "head_sha=${{ github.event.pull_request.head.sha }}" \
              -f "status=queued" \
              -f "output[title]=My Check Run Title" \
              -f "output[summary]=A *fancy* summary" \
              -f "output[text]=More detailed Markdown **text**" \
              --jq ".id"

      # - uses: actions/github-script@v7
      #   with:
      #     result-encoding: string
      #     retries: 3
      #     script: |
      #       github.rest.checks.create({
      #         owner: "${{ github.repository_owner }}",
      #         repo: "github-actions-experiment",
      #         name: "my-check",
      #         head_sha: "${{ github.sha }}",
      #       })
      - run: echo "Success!"